(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,n){e.exports=n(249)},120:function(e,t){e.exports=function(e){var t=e.MOUSE;function n(t){this.object=t,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25;var n,o,i,a,r,s,l,c,d=this,u=1e-6,h=0,m=0,p=1,f=new e.Vector3,b=!1;this.getPolarAngle=function(){return o},this.getAzimuthalAngle=function(){return n},this.rotateLeft=function(e){m-=e},this.rotateUp=function(e){h-=e},this.panLeft=(i=new e.Vector3,function(e){var t=this.object.matrix.elements;i.set(t[0],t[1],t[2]),i.multiplyScalar(-e),f.add(i)}),this.panUp=function(){var t=new e.Vector3;return function(e){var n=this.object.matrix.elements;t.set(n[4],n[5],n[6]),t.multiplyScalar(e),f.add(t)}}(),this.pan=function(t,n,o,i){if(d.object instanceof e.PerspectiveCamera){var a=d.object.position.clone().sub(d.target).length();a*=Math.tan(d.object.fov/2*Math.PI/180),d.panLeft(2*t*a/i),d.panUp(2*n*a/i)}else d.object instanceof e.OrthographicCamera?(d.panLeft(t*(d.object.right-d.object.left)/o),d.panUp(n*(d.object.top-d.object.bottom)/i)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(t){d.object instanceof e.PerspectiveCamera?p/=t:d.object instanceof e.OrthographicCamera?(d.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),d.object.updateProjectionMatrix(),b=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){d.object instanceof e.PerspectiveCamera?p*=t:d.object instanceof e.OrthographicCamera?(d.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),d.object.updateProjectionMatrix(),b=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=(a=new e.Vector3,r=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),s=r.clone().inverse(),l=new e.Vector3,c=new e.Quaternion,function(){var e=this.object.position;a.copy(e).sub(this.target),a.applyQuaternion(r),n=Math.atan2(a.x,a.z),o=Math.atan2(Math.sqrt(a.x*a.x+a.z*a.z),a.y),n+=m,o+=h,n=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,n)),o=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,o)),o=Math.max(u,Math.min(Math.PI-u,o));var t=a.length()*p;return t=Math.max(this.minDistance,Math.min(this.maxDistance,t)),this.target.add(f),a.x=t*Math.sin(o)*Math.sin(n),a.y=t*Math.cos(o),a.z=t*Math.sin(o)*Math.cos(n),a.applyQuaternion(s),e.copy(this.target).add(a),this.object.lookAt(this.target),!0===this.enableDamping?(m*=1-this.dampingFactor,h*=1-this.dampingFactor):(m=0,h=0),p=1,f.set(0,0,0),!!(b||l.distanceToSquared(this.object.position)>u||8*(1-c.dot(this.object.quaternion))>u)&&(l.copy(this.object.position),c.copy(this.object.quaternion),b=!1,!0)})}function o(t,o){var i=new n(t);this.domElement=void 0!==o?o:document,Object.defineProperty(this,"constraint",{get:function(){return i}}),this.getPolarAngle=function(){return i.getPolarAngle()},this.getAzimuthalAngle=function(){return i.getAzimuthalAngle()},this.enabled=!0,this.center=this.target,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT};var a=this,r=new e.Vector2,s=new e.Vector2,l=new e.Vector2,c=new e.Vector2,d=new e.Vector2,u=new e.Vector2,h=new e.Vector2,m=new e.Vector2,p=new e.Vector2,f=-1,b=0,g=1,w=2,y=3,v=4,M=5,E=f;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var S={type:"change"},x={type:"start"},L={type:"end"};function k(e,t){var n=a.domElement===document?a.domElement.body:a.domElement;i.pan(e,t,n.clientWidth,n.clientHeight)}function R(){return Math.pow(.95,a.zoomSpeed)}function O(e){if(!1!==a.enabled){if(e.preventDefault(),e.button===a.mouseButtons.ORBIT){if(!1===a.enableRotate)return;E=b,r.set(e.clientX,e.clientY)}else if(e.button===a.mouseButtons.ZOOM){if(!1===a.enableZoom)return;E=g,h.set(e.clientX,e.clientY)}else if(e.button===a.mouseButtons.PAN){if(!1===a.enablePan)return;E=w,c.set(e.clientX,e.clientY)}E!==f&&(document.addEventListener("mousemove",C,!1),document.addEventListener("mouseup",P,!1),a.dispatchEvent(x))}}function C(e){if(!1!==a.enabled){e.preventDefault();var t=a.domElement===document?a.domElement.body:a.domElement;if(E===b){if(!1===a.enableRotate)return;s.set(e.clientX,e.clientY),l.subVectors(s,r),i.rotateLeft(2*Math.PI*l.x/t.clientWidth*a.rotateSpeed),i.rotateUp(2*Math.PI*l.y/t.clientHeight*a.rotateSpeed),r.copy(s)}else if(E===g){if(!1===a.enableZoom)return;m.set(e.clientX,e.clientY),p.subVectors(m,h),p.y>0?i.dollyIn(R()):p.y<0&&i.dollyOut(R()),h.copy(m)}else if(E===w){if(!1===a.enablePan)return;d.set(e.clientX,e.clientY),u.subVectors(d,c),k(u.x,u.y),c.copy(d)}E!==f&&a.update()}}function P(){!1!==a.enabled&&(document.removeEventListener("mousemove",C,!1),document.removeEventListener("mouseup",P,!1),a.dispatchEvent(L),E=f)}function j(e){if(!1!==a.enabled&&!1!==a.enableZoom&&E===f){e.preventDefault(),e.stopPropagation();var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?i.dollyOut(R()):t<0&&i.dollyIn(R()),a.update(),a.dispatchEvent(x),a.dispatchEvent(L)}}function z(e){if(!1!==a.enabled&&!1!==a.enableKeys&&!1!==a.enablePan)switch(e.keyCode){case a.keys.UP:k(0,a.keyPanSpeed),a.update();break;case a.keys.BOTTOM:k(0,-a.keyPanSpeed),a.update();break;case a.keys.LEFT:k(a.keyPanSpeed,0),a.update();break;case a.keys.RIGHT:k(-a.keyPanSpeed,0),a.update()}}function T(e){if(!1!==a.enabled){switch(e.touches.length){case 1:if(!1===a.enableRotate)return;E=y,r.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!1===a.enableZoom)return;E=v;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);h.set(0,o);break;case 3:if(!1===a.enablePan)return;E=M,c.set(e.touches[0].pageX,e.touches[0].pageY);break;default:E=f}E!==f&&a.dispatchEvent(x)}}function A(e){if(!1!==a.enabled){e.preventDefault(),e.stopPropagation();var t=a.domElement===document?a.domElement.body:a.domElement;switch(e.touches.length){case 1:if(!1===a.enableRotate)return;if(E!==y)return;s.set(e.touches[0].pageX,e.touches[0].pageY),l.subVectors(s,r),i.rotateLeft(2*Math.PI*l.x/t.clientWidth*a.rotateSpeed),i.rotateUp(2*Math.PI*l.y/t.clientHeight*a.rotateSpeed),r.copy(s),a.update();break;case 2:if(!1===a.enableZoom)return;if(E!==v)return;var n=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,b=Math.sqrt(n*n+o*o);m.set(0,b),p.subVectors(m,h),p.y>0?i.dollyOut(R()):p.y<0&&i.dollyIn(R()),h.copy(m),a.update();break;case 3:if(!1===a.enablePan)return;if(E!==M)return;d.set(e.touches[0].pageX,e.touches[0].pageY),u.subVectors(d,c),k(u.x,u.y),c.copy(d),a.update();break;default:E=f}}}function I(){!1!==a.enabled&&(a.dispatchEvent(L),E=f)}function G(e){e.preventDefault()}this.update=function(){this.autoRotate&&E===f&&i.rotateLeft(2*Math.PI/60/60*a.autoRotateSpeed),!0===i.update()&&this.dispatchEvent(S)},this.reset=function(){E=f,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(S),this.update()},this.dispose=function(){this.domElement.removeEventListener("contextmenu",G,!1),this.domElement.removeEventListener("mousedown",O,!1),this.domElement.removeEventListener("mousewheel",j,!1),this.domElement.removeEventListener("MozMousePixelScroll",j,!1),this.domElement.removeEventListener("touchstart",T,!1),this.domElement.removeEventListener("touchend",I,!1),this.domElement.removeEventListener("touchmove",A,!1),document.removeEventListener("mousemove",C,!1),document.removeEventListener("mouseup",P,!1),window.removeEventListener("keydown",z,!1)},this.domElement.addEventListener("contextmenu",G,!1),this.domElement.addEventListener("mousedown",O,!1),this.domElement.addEventListener("mousewheel",j,!1),this.domElement.addEventListener("MozMousePixelScroll",j,!1),this.domElement.addEventListener("touchstart",T,!1),this.domElement.addEventListener("touchend",I,!1),this.domElement.addEventListener("touchmove",A,!1),window.addEventListener("keydown",z,!1),this.update()}return t||(t={LEFT:0,MIDDLE:1,RIGHT:2}),o.prototype=Object.create(e.EventDispatcher.prototype),o.prototype.constructor=o,Object.defineProperties(o.prototype,{object:{get:function(){return this.constraint.object}},target:{get:function(){return this.constraint.target},set:function(e){console.warn("THREE.OrbitControls: target is now immutable. Use target.set() instead."),this.constraint.target.copy(e)}},minDistance:{get:function(){return this.constraint.minDistance},set:function(e){this.constraint.minDistance=e}},maxDistance:{get:function(){return this.constraint.maxDistance},set:function(e){this.constraint.maxDistance=e}},minZoom:{get:function(){return this.constraint.minZoom},set:function(e){this.constraint.minZoom=e}},maxZoom:{get:function(){return this.constraint.maxZoom},set:function(e){this.constraint.maxZoom=e}},minPolarAngle:{get:function(){return this.constraint.minPolarAngle},set:function(e){this.constraint.minPolarAngle=e}},maxPolarAngle:{get:function(){return this.constraint.maxPolarAngle},set:function(e){this.constraint.maxPolarAngle=e}},minAzimuthAngle:{get:function(){return this.constraint.minAzimuthAngle},set:function(e){this.constraint.minAzimuthAngle=e}},maxAzimuthAngle:{get:function(){return this.constraint.maxAzimuthAngle},set:function(e){this.constraint.maxAzimuthAngle=e}},enableDamping:{get:function(){return this.constraint.enableDamping},set:function(e){this.constraint.enableDamping=e}},dampingFactor:{get:function(){return this.constraint.dampingFactor},set:function(e){this.constraint.dampingFactor=e}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=e}}}),o}},126:function(e,t){},128:function(e,t){},142:function(e,t){},144:function(e,t){},172:function(e,t){},174:function(e,t){},175:function(e,t){},180:function(e,t){},182:function(e,t){},189:function(e,t){},191:function(e,t){},209:function(e,t){},212:function(e,t){},228:function(e,t){},231:function(e,t){},248:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var o,i=n(15);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={scale:.015,arena:{size:180,minX:-85,maxX:85,minY:-85,maxY:85},offsets:{x:0,y:80,z:150,showZeroMarker:!0,showCoordMarker:!1,scaleRange:360},mqtt:{server:localStorage.getItem("pera-swarm-server")||"webservices.ceykod.com",port:parseInt(localStorage.getItem("pera-swarm-port"))||8883,path:localStorage.getItem("pera-swarm-path")||"/mqtt",channel:localStorage.getItem("pera-swarm-channel")||"v1"},mixedReality:{obstacles:"M",robots:"M"},selectedReality:"M",selectedRealities:{real:!0,virtual:!0},hiddenOpacity:.15,isDev:!0,isShowingStats:!0,isShowingLables:!0,labelsVisibility:{obstacles:!1,robots:!1},isShowingRobotSnapshots:!0,isLoaded:!1,isTweening:!1,isRotating:!1,isMouseMoving:!1,isMouseOver:!1,maxAnisotropy:1,dpr:1,easing:i.a.Easing.Quadratic.InOut,duration:500,texture:{path:"./assets/textures/",imageFiles:[{name:"UV",image:"UV_Grid_Sm.jpg"}]},mesh:{enableHelper:!1,wireframe:!1,translucent:!1,material:{color:16777215,emissive:16777215}},fog:{color:16777215,near:8e-4},camera:{fov:50,near:50,far:1e3,aspect:1,posX:0,posY:0,posZ:0},controls:{autoRotate:!1,autoRotateSpeed:-.5,rotateSpeed:.5,zoomSpeed:.8,minDistance:200,maxDistance:800,minPolarAngle:0,maxPolarAngle:7/16*Math.PI,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0,enableDamping:!0,dampingFactor:.5,enableZoom:!0,target:{x:0,y:0,z:0}},ambientLight:{enabled:!0,color:1315860},directionalLight:{enabled:!0,color:15790320,intensity:.4,x:-75,y:280,z:150},shadow:{enabled:!0,helperEnabled:!1,bias:0,mapWidth:2048,mapHeight:2048,near:250,far:400,top:100,right:100,bottom:-100,left:-100},pointLight:{enabled:!0,color:16777215,intensity:.34,distance:115,x:0,y:0,z:0},hemiLight:{enabled:!0,color:13158600,groundColor:16777215,intensity:.55,x:0,y:0,z:0}},c=localStorage.getItem(document.location.href+"-vr.config");o=null!=c?JSON.parse(c):l;var d=function(e){localStorage.setItem(document.location.href+"-vr.config",JSON.stringify(r(r({},l),e)))},u=o,h={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,n,o;t=void 0!==(e=e||{}).parent?e.parent:document.body,n=void 0!==e.id?e.id:"oldie",(o=this.getWebGLErrorMessage()).id=n,t.appendChild(o)}},m=n(0),p=n(36);function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var b=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.container=n,this.threeRenderer=new m.WebGLRenderer({antialias:!0,alpha:!0}),this.threeRenderer.setClearColor(new m.Color("lightgrey"),0),this.threeRenderer.setPixelRatio(window.devicePixelRatio),this.threeRenderer.setSize(window.innerWidth,window.innerHeight),this.threeRenderer.domElement.style.position="absolute",this.threeRenderer.domElement.style.top="0px",this.threeRenderer.domElement.style.left="0px",n.appendChild(this.threeRenderer.domElement),this.threeRenderer.shadowMap.enabled=!0,this.threeRenderer.shadowMap.type=m.PCFSoftShadowMap,u.maxAnisotropy=this.threeRenderer.capabilities.getMaxAnisotropy(),this.updateSize(),document.addEventListener("DOMContentLoaded",(function(){return o.updateSize()}),!1),window.addEventListener("resize",(function(){return o.updateSize()}),!1)}var t,n,o;return t=e,(n=[{key:"updateSize",value:function(){this.threeRenderer.setSize(this.container.offsetWidth,this.container.offsetHeight)}},{key:"render",value:function(e,t){this.threeRenderer.render(e,t)}}])&&f(t.prototype,n),o&&f(t,o),e}(),g=n(56),w=function(e,t,n,o){if(void 0!==n){var i=document.createElement("div");i.className="label",i.textContent=t.name,i.style.marginTop="-1.2em";var a=new g.a(i);a.name="Label[".concat(t.id,"]"),a.position.set(0,1,0),a.visible=o,n.add(a),n.removeLabel=function(){n.remove(a)}}},y=function(e){void 0!==e&&void 0!==e.removeLabel&&e.removeLabel()};function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.init()}var t,n,o;return t=e,(n=[{key:"init",value:function(){this.ambientLight=new m.AmbientLight(u.ambientLight.color),this.ambientLight.visible=u.ambientLight.enabled,this.pointLight=new m.PointLight(u.pointLight.color,u.pointLight.intensity,u.pointLight.distance),this.pointLight.position.set(u.pointLight.x,u.pointLight.y,u.pointLight.z),this.pointLight.visible=u.pointLight.enabled,this.directionalLight=new m.DirectionalLight(u.directionalLight.color,u.directionalLight.intensity),this.directionalLight.position.set(u.directionalLight.x,u.directionalLight.y,u.directionalLight.z),this.directionalLight.visible=u.directionalLight.enabled,this.directionalLight.castShadow=u.shadow.enabled,this.directionalLight.shadow.bias=u.shadow.bias,this.directionalLight.shadow.camera.near=u.shadow.near,this.directionalLight.shadow.camera.far=u.shadow.far,this.directionalLight.shadow.camera.left=u.shadow.left,this.directionalLight.shadow.camera.right=u.shadow.right,this.directionalLight.shadow.camera.top=u.shadow.top,this.directionalLight.shadow.camera.bottom=u.shadow.bottom,this.directionalLight.shadow.mapSize.width=u.shadow.mapWidth,this.directionalLight.shadow.mapSize.height=u.shadow.mapHeight,this.directionalLightHelper=new m.CameraHelper(this.directionalLight.shadow.camera),this.directionalLightHelper.visible=u.shadow.helperEnabled,this.hemiLight=new m.HemisphereLight(u.hemiLight.color,u.hemiLight.groundColor,u.hemiLight.intensity),this.hemiLight.position.set(u.hemiLight.x,u.hemiLight.y,u.hemiLight.z),this.hemiLight.visible=u.hemiLight.enabled}},{key:"place",value:function(e){switch(e){case"ambient":this.scene.add(this.ambientLight);break;case"directional":this.scene.add(this.directionalLight),this.scene.add(this.directionalLightHelper);break;case"point":this.scene.add(this.pointLight);break;case"hemi":this.scene.add(this.hemiLight)}}}])&&v(t.prototype,n),o&&v(t,o),e}();n(120);function E(e,t,n,o){return{posX:.01*u.offsets.x+o*e,posY:.01*u.offsets.y+o*(-t+Math.abs(u.arena.minY)),posZ:.01*u.offsets.z+o*-n}}function S(e){return{scaleX:e,scaleY:e,scaleZ:e}}function x(e,t,n){return{rotX:e-Math.PI/2,rotY:t,rotZ:n}}var L,k,R,O,C=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.log("Environment: Scale: ".concat(scene_scale,", arenaSize:").concat(u.arena.size));new m.PlaneBufferGeometry(u.arena.size,u.arena.size),new m.MeshStandardMaterial({color:10066329,depthWrite:!1,opacity:0});var t=E(0,0,0,scene_scale),n=t.posX,o=t.posY,i=t.posZ,a=x(0,0,0),r=a.rotX,s=a.rotY,l=a.rotZ,c=S(scene_scale),d=c.scaleX,h=c.scaleY,p=c.scaleZ,f=new m.GridHelper(u.arena.size,18,0,5987163);f.rotation.set(r,s,l),f.position.set(n,o,i),f.scale.set(d,h,p),f.material.opacity=.15,markerGroup.add(f);var b=new m.SphereGeometry(5,16,16),g=new m.Mesh(b,new m.MeshBasicMaterial({color:16776960}));g.name="zeroMarker",g.scale.set(scene_scale,scene_scale,scene_scale),g.visible=u.offsets.showZeroMarker,markerGroup.add(g),window.zeroMarker=g;var w=new m.SphereGeometry(2.5,16,16),y=new m.Mesh(w,new m.MeshBasicMaterial({color:16711680}));y.name="coordinateMarker",y.position.set(n,o,i),y.scale.set(scene_scale,scene_scale,scene_scale),y.visible=u.offsets.showCoordMarker,markerGroup.add(y),window.coordMarker=y};function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}var t,n,o;return t=e,o=[{key:"start",value:function(){L("frame").start(),R.start(),L("rAF").tick(),L("FPS").frame(),L("render").start()}},{key:"end",value:function(){L("render").end(),L("frame").end(),L("rStats").start(),L().update(),L("rStats").end()}}],(n=[{key:"setUp",value:function(){k=new BrowserStats,R=new glStats,O=new threeStats(this.renderer),L=new rStats({CSSPath:"./css/",userTimingAPI:!0,values:{frame:{caption:"Total frame time (ms)",over:16,average:!0,avgMs:100},fps:{caption:"Framerate (FPS)",below:30},calls:{caption:"Calls (three.js)",over:3e3},raf:{caption:"Time since last rAF (ms)",average:!0,avgMs:100},rstats:{caption:"rStats update (ms)",average:!0,avgMs:100},texture:{caption:"GenTex",average:!0,avgMs:100}},groups:[{caption:"Framerate",values:["fps","raf"]},{caption:"Frame Budget",values:["frame","texture","setup","render"]}],fractions:[{base:"frame",steps:["texture","setup","render"]}],plugins:[k,O]})}}])&&P(t.prototype,n),o&&P(t,o),e}();function z(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gui=new dat.GUI,this.gui.useLocalStorage=!0}var t,n,o;return t=e,(n=[{key:"load",value:function(e,t){var n=this,o=(parseInt(u.offsets.scaleRange),this.gui.addFolder("Reality"));o.add(u.selectedRealities,"real").name("Physical Reality").listen().onChange((function(e){n.toggleReality("real","R"),d(u)})),o.add(u.selectedRealities,"virtual").name("Virtual Reality").listen().onChange((function(e){n.toggleReality("virtual","V"),d(u)}));var i=this.gui.addFolder("Placement");i.add(u.offsets,"showZeroMarker").name("Zero Marker").listen().onChange((function(e){d(u),window.zeroMarker.visible=e})),i.add(u.offsets,"showCoordMarker").name("Coordinate Marker").listen().onChange((function(e){d(u),window.coordMarker.visible=e})),i.add(u.offsets,"x").min(-1*parseInt(360)).max(parseInt(360)).name("X Offset").listen().onChange((function(e){u.offsets.x=e,n.updateCoord(),d(u)})),i.add(u.offsets,"y").min(-1*parseInt(360)).max(parseInt(360)).name("Y Offset").listen().onChange((function(e){u.offsets.y=e,n.updateCoord(),d(u)})),i.add(u.offsets,"z").min(-1*parseInt(500)).max(parseInt(500)).name("Z Offset").listen().onChange((function(e){u.offsets.z=e,n.updateCoord(),d(u)})),i.add(u,"scale",0,.1).name("Scale").listen().onChange((function(e){u.offsets.scale=e,window.coordMarker.scale.set(e,e,e),d(u)})),this.gui.open()}},{key:"toggleLabels",value:function(e,t,n){if(d(u),Array.isArray(e)&&void 0!==t&&""!==t){var o,i=z(e);try{for(i.s();!(o=i.n()).done;){var a=o.value;a.name.startsWith(t)&&(a.children[0].visible=n)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"toggleReality",value:function(e,t){var n=window.markerGroup.children;d(u),Object.entries(n).forEach((function(e){e[1].name;var t=e[1].reality;void 0!==t&&"R"===t?e[1].material.opacity=u.selectedRealities.real?1:u.hiddenOpacity:void 0!==t&&"V"===t&&(e[1].material.opacity=u.selectedRealities.virtual?1:u.hiddenOpacity)}))}},{key:"updateCoord",value:function(){var e=window.coordMarker.position,t=E(e.x,e.y,e.z,scene_scale),n=t.posX,o=t.posY,i=t.posZ;window.coordMarker.position.set(n,o,i)}},{key:"unload",value:function(){this.gui.destroy(),this.gui=new dat.GUI}}])&&A(t.prototype,n),o&&A(t,o),e}(),G=n(57),D=n.n(G);function Z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var V=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.scale=scene_scale,console.log("Obstacle Reality:",u.mixedReality.obstacles),void 0!==n&&n()}var t,n,o;return t=e,(n=[{key:"createList",value:function(e){var t=this;Object.entries(e).forEach((function(e){void 0!==e&&t.create(e[1])}))}},{key:"create",value:function(e){var t=this.createGeometry(e.geometry),n=this.createMaterial(e.material);n.userData.originalColor=new m.Color(6710886),n.userData.labelVisibility=u.isShowingLables&&u.labelsVisibility.obstacles,n.userData.originalEmmisive=n.emissive.getHex(),n.selected=!1,n.transparent=!0;var o=e.id||1e3+Math.floor(900*Math.random()),i=null==e.reality?"V":e.reality,a=new m.Mesh(t,n),r="Obs_"+o.toString().substring(0,8)+"...";if(a.name="Obstacle_"+o,a.reality=i,"V"===a.reality?n.opacity=u.selectedRealities.virtual?1:u.hiddenOpacity:"R"===a.reality&&(n.opacity=u.selectedRealities.real?1:u.hiddenOpacity),this.deleteIfExists(o),window.markerGroup.add(a),void 0!==e.position){var s=e.position,l=E(s.x,s.y,this.calculateZ(e),this.scale),c=l.posX,d=l.posY,h=l.posZ,p=S(this.scale),f=p.scaleX,b=p.scaleY,g=p.scaleZ;a.position.set(c,d,h),a.scale.set(f,b,g)}if(null!=e.rotation){var y=e.rotation,v=y.x,M=y.y,L=y.z,k=x(v/360*2*Math.PI,M/360*2*Math.PI,L/360*2*Math.PI),R=k.rotX,O=k.rotY,C=k.rotZ;a.rotation.set(R,O,C)}u.shadow.enabled&&(a.receiveShadow=!0),w(0,{id:e.id,name:r},a,u.labelsVisibility.obstacles),console.log("Created>",a.name)}},{key:"createGeometry",value:function(e){if(null==e.type)throw new TypeError("type unspecified");if("BoxGeometry"==e.type)return this.createBoxGeometry(e.width,e.height,e.depth);if("CylinderGeometry"==e.type)return this.createCylinderGeometry(e.radiusTop,e.radiusBottom,e.height);if("SphereGeometry"==e.type)return this.createSphereGeometry(e.radius);throw new TypeError("unsupported geometry type")}},{key:"createBoxGeometry",value:function(e,t,n){if(null==e)throw new TypeError("width unspecified");if(null==t)throw new TypeError("height unspecified");if(null==n)throw new TypeError("depth unspecified");return new m.BoxGeometry(e,t,n)}},{key:"createCylinderGeometry",value:function(e,t,n){if(null==e)throw new TypeError("radiusTop unspecified");if(null==t)throw new TypeError("radiusBottom unspecified");if(null==n)throw new TypeError("height unspecified");var o=o||2,i=i||16;return new m.CylinderGeometry(e,t,n,i,o)}},{key:"createSphereGeometry",value:function(e){if(null==e)throw new TypeError("radius unspecified");var t=t||16,n=n||16;return new m.SphereGeometry(e,t,n)}},{key:"createMaterial",value:function(e){return"MeshBasicMaterial"==e.type?new m.MeshBasicMaterial(e.properties):"MeshNormalMaterial"==e.type?new m.MeshNormalMaterial(e.properties):"MeshPhongMaterial"==e.type?new m.MeshPhongMaterial(e.properties):"MeshPhysicalMaterial"==e.type?new m.MeshPhysicalMaterial(e.properties):(e.type,new m.MeshStandardMaterial(e.properties))}},{key:"calculateZ",value:function(e){return null==e.position.z?void 0!==e.geometry.height?e.geometry.height/2:void 0!==e.geometry.radius?e.geometry.radius:0:e.position.z}},{key:"deleteIfExists",value:function(e){var t="Obstacle_"+e,n=window.markerGroup.getObjectByName(t);void 0!==n&&(window.markerGroup.remove(n),y(obj[1]),console.log("Deleted>",t))}},{key:"deleteAll",value:function(){var e=window.markerGroup.children;Object.entries(e).forEach((function(e){var t=e[1].name;t.startsWith("Obstacle_")&&(console.log("Deleted>",t),window.markerGroup.remove(e[1]))}))}}])&&Z(t.prototype,n),o&&Z(t,o),e}();function F(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Y=n(121)(m),H=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.scale=u.scale,console.log("Robot Reality:",u.mixedReality.robots);var o=this;this.created=!0,setInterval((function(){!0===n.created&&(o.prune(),n.created=!1)}),2500)}var t,n,o;return t=e,(n=[{key:"create",value:function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"V",a=arguments.length>5?arguments[5]:void 0,r=window.markerGroup.getObjectByName("Robot_"+e),s=u.mixedReality.robots;if(void 0===r)if(i===s||"M"===s){t=Math.min(Math.max(t,u.arena.minX),u.arena.maxX),n=Math.min(Math.max(n,u.arena.minY),u.arena.maxY);var l=new Y;l.load("./assets/models/model.stl",(function(r,s){var l=new m.MeshStandardMaterial({color:6710886,transparent:!0});l.userData.originalColor=new m.Color(6710886),l.userData.labelVisibility=u.isShowingLables&&u.labelsVisibility.robots,l.selected=!1;var c=u.scale||.1,d=E(t,n,0,c),h=d.posX,p=d.posY,f=d.posZ,b=x(0,0,0),g=b.rotX,y=b.rotY,v=b.rotZ,M=S(c),L=M.scaleX,k=M.scaleY,R=M.scaleZ,O=new m.Mesh(r,l);O.receiveShadow=!0,O.robotId=e,O.name="Robot_"+e,O.scale.set(L,k,R),O.position.set(h,p,f),O.rotation.set(g,y,v),O.reality=i,"V"===i?l.opacity=u.selectedRealities.virtual?1:u.hiddenOpacity:"R"===i&&(l.opacity=u.selectedRealities.real?1:u.hiddenOpacity),window.markerGroup.add(O),O.clickEvent=function(e){window.robot.alert(e)},w(0,{id:e,name:O.name},O,u.labelsVisibility.robots),console.log("Created> Robot: id:".concat(e," | x:").concat(t," y: ").concat(n," heading: ").concat(o," | reality: ").concat(i)),void 0!==a&&a("success")}))}else console.error("Creation Failed> Robot: id:".concat(e,"  reality: ").concat(i,"!=").concat(s));else i===s||"M"===s?(this.setReality(e,i),void 0!==a&&a("success")):(this.delete(e),void 0!==a&&a("deleted"));return this.created=!0,r}},{key:"setReality",value:function(e,t){var n=this.scene.getObjectByName("Robot_"+e);null!=n&&(n.reality=t)}},{key:"exists",value:function(e){return window.markerGroup.getObjectByName("Robot_"+e)}},{key:"delete",value:function(e,t){if(void 0!==e){var n=window.markerGroup.getObjectByName("Robot_"+e);void 0!==n?(scene.remove(n),console.log("Deleted> id:",e),y(obj[1]),void 0!==t&&t("success")):void 0!==t&&t("not found")}}},{key:"deleteAll",value:function(){var e=window.markerGroup.children;Object.entries(e).forEach((function(e){var t=e[1].name;t.startsWith("Robot_")&&(console.log("Deleted>",t),y(e[1]),window.markerGroup.remove(e[1]))}))}},{key:"move",value:function(e,t,n,o,a){var r=window.markerGroup.getObjectByName("Robot_"+e);if(void 0!==r){var s=r.rotation.y,l=(o-90)*m.Math.DEG2RAD,c={x:r.position.x,y:r.position.y,heading:r.rotation.y},d=s*l>=0;t=Math.min(Math.max(Math.round(10*t)/10,u.arena.minX),u.arena.maxX),n=Math.min(Math.max(Math.round(10*n)/10,u.arena.minY),u.arena.maxY),o=Math.round(10*o)/10;var h=E(t,n,0,u.scale),p=h.posX,f=h.posY,b=(h.posZ,x(0,0,0));return b.rotX,b.rotY,b.rotZ,0!==Math.sqrt(Math.pow(p-c.x,2)+Math.pow(f-c.y,2))?new i.a.Tween(c).to({x:p,y:f,heading:l},1e3).onUpdate((function(){r.position.x=c.x,r.position.y=c.y,d&&(r.rotation.y=c.heading)})).onComplete((function(){r.rotation.y=c.heading,null!=a&&a("success")})).delay(50).start():r.rotation.y=l,r}null!=a&&a("undefined")}},{key:"get_coordinates",value:function(e){var t=window.markerGroup.getObjectByName("Robot_"+e);return void 0!==t?(console.log("".concat(t.position.x,",").concat(t.position.y,",").concat(t.position.z)),{x:t.position.x,y:t.position.y,z:t.position.z,heading:t.rotation.y}):null}},{key:"changeColor",value:function(e,t,n,o,i){var a=window.markerGroup.getObjectByName("Robot_"+e);return void 0!==a?(a.material.color.setRGB(t/256,n/256,o/265),null!==i&&i("success"),a):(null!==i&&i("undefined"),null)}},{key:"update",value:function(){i.a.update()}},{key:"requestSnapshot",value:function(e){return new Promise((function(t,n){t(!window.mqtt.publish(window.channel+"/mgt/robots/snapshot",JSON.stringify({id:e.robotId})))}))}},{key:"alert",value:function(e){var t,n=document.querySelector("#msg-box"),o=document.getElementById("msg-content"),i=document.createElement("div");i.setAttribute("id","msg-content"),u.isShowingRobotSnapshots?(t=document.createTextNode("".concat(e.name," Snapshot Loading...")),this.requestSnapshot(e)):t=document.createTextNode("".concat(e.name)),i.appendChild(t),n.replaceChild(i,o),n.style.display="block",setTimeout((function(){n.style.opacity="1.0",n.style.display="none"}),1e4)}},{key:"prune",value:function(){var e=this,t=window.markerGroup.children,n=[];Object.entries(t).forEach((function(t){var o=t[1].name;o.startsWith("Robot_")&&(void 0===n[o]?n[o]="valid":(y(t[1]),e.scene.remove(t[1])))}))}}])&&F(t.prototype,n),o&&F(t,o),e}();n(122);function N(e,t){var n,o=t;return window.location.href.indexOf(e)>-1&&(o=(n={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,t,o){n[t]=o})),n)[e]),o}function U(){var e,t=localStorage.getItem("pera-swarm-credentials"),n=N("key",!1),o=N("username",!1),i=N("password",!1),a=N("channel",!1),r=N("port",!1),s=N("server",!1);if(e=window.location.origin+window.location.pathname,window.history.pushState({},document.title,e),setTimeout((function(){!1!==s&&localStorage.setItem("pera-swarm-server",s),!1!==a&&localStorage.setItem("pera-swarm-channel",a),!1!==r&&localStorage.setItem("pera-swarm-port",r),!1!==n&&localStorage.setItem("pera-swarm-key",n)}),2e3),!1!==n){console.log("Credentails: Loaded from JWT");var l=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}(n),c=l.user,d=l.pass,u=l.channel;return void 0!==l.host&&localStorage.setItem("pera-swarm-server",l.host),void 0!==l.port&&localStorage.setItem("pera-swarm-port",parseInt(l.port)),void 0!==l.path&&localStorage.setItem("pera-swarm-path",l.path),void 0!==l.channel&&localStorage.setItem("pera-swarm-channel",l.channel),localStorage.setItem("pera-swarm-credentials",JSON.stringify({username:c,password:d,channel:u})),{username:c,password:d,channel:u}}return!1!==o&&!1!==i?(console.log("Credentails: Loaded from URL parameters"),localStorage.setItem("pera-swarm-credentials",JSON.stringify({username:o,password:i,channel:a})),{username:o,password:i,channel:a}):!1===o&&!1===i&&null!==t?(console.log("Credentails: Loaded from local storage"),JSON.parse(t)):-1}function X(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var _,B=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.markerGroup=n,this.scene=t,this.robot=new H(t),this.obstacles=new V(t),this.updateChannel();var i=U();if(-1===i)alert("Unauthorized access! The Visualizer will not work properly.");else{var a=i.username,r=i.password,s="client_"+Math.random().toString(36).substring(2,15);this.client=new D.a.Client(u.mqtt.server,u.mqtt.port,u.mqtt.path,s),window.mqtt=this.client,this.client.connect({userName:a,password:r,reconnect:!0,useSSL:!0,cleanSession:!1,onSuccess:function(){console.log("MQTT: connected"),o.subscribe("localization/data"),o.subscribe("localization/update"),o.subscribe("robot/create"),o.subscribe("robot/delete"),o.subscribe("robot/msg/broadcast"),o.subscribe("output/neopixel"),o.subscribe("obstacles"),o.subscribe("obstacles/delete"),o.subscribe("obstacles/delete/all"),o.subscribe("mgt/visualizer"),o.subscribe("mgt/robots/?"),o.publish("obstacles/?",u.mixedReality.obstacles),o.publish("localization/data/?",u.mixedReality.robots),window.robot=o.robot,window.obstacles=o.obstacles,o.client.onMessageArrived=o.onMessageArrived,o.client.onConnectionLost=o.onConnectionLost},onFailure:function(){console.log("MQTT: connection failed"),alert("MQTT: connection failed!")}})}}var t,n,o;return t=e,(n=[{key:"updateChannel",value:function(){var e=window.location.hash;return""!=e&e.length>1?window.channel=e.split("#")[1].split("?")[0]:window.channel=u.mqtt.channel,console.log("MQTT: channel=",window.channel,e),!0}},{key:"onConnectionLost",value:function(e){0!==e.errorCode&&(console.log("MQTT: onConnectionLost:"+e.errorMessage),console.log("MQTT: reconnecting"))}},{key:"onMessageArrived",value:function(e){var t=e.payloadString.trim(),n=e.destinationName,o=n.substring(n.indexOf("/")+1);if("robot/create"==o)try{var i=JSON.parse(t);window.robot.create(i.id,i.x,i.y,i.heading,i.reality)}catch(e){console.error(e)}else if("robot/delete"==o)try{var a=JSON.parse(t);window.robot.delete(a.id)}catch(e){console.error(e)}else if("localization/update"==o||"localization/data"==o)try{var r=JSON.parse(t),s=u.mixedReality.robots;if(null!=r)for(var l in r){var c=r[l],d=c.id,h=c.x,m=c.y,p=c.heading,f=null==r[l].reality?"V":r[l].reality;f===s||"M"===s?null==window.robot.exists(d)?window.robot.create(d,h,m,p,f):(window.robot.move(d,h,m,p),window.robot.setReality(d,f)):robot.delete(d)}}catch(e){console.error(e)}else if("obstacles"==o)try{var b=JSON.parse(t);window.obstacles.createList(b)}catch(e){console.error(e)}else if("obstacles/delete"==o){var g=JSON.parse(t);console.log(g),window.obstacles.deleteIfExists(g.id)}else if("obstacles/delete/all"==o)window.obstacles.deleteAll();else if("output/neopixel"==o)try{var w=JSON.parse(t);window.robot.changeColor(w.id,w.R,w.G,w.B)}catch(e){console.error(e)}else if("robot/msg/broadcast"==o){if("ID? -1"!=t){var y="Broadcast Message: "+t.split(" ")[0],v=1e3+95*t.length,M=document.querySelector("#msg-box");M.innerHTML=y,M.style.display="block",setTimeout((function(){document.querySelector("#msg-box").style.display="none"}),v)}}else if("mgt/visualizer"==o)if("REFRESH"===t)console.log("page refresh request"),location.reload();else if(t.startsWith("MSG")){var E="Notice: "+t.substring(4),S=2e3+95*E.length,x=document.querySelector("#msg-box");x.innerHTML=E,x.style.display="block",setTimeout((function(){document.querySelector("#msg-box").style.display="none"}),S)}else console.log(">Management:",t);else if(t.startsWith("MSG")){var L="Notice: "+t.substring(4),k=2e3+95*L.length,R=document.querySelector("#msg-box");R.innerHTML=L,R.style.display="block",setTimeout((function(){document.querySelector("#msg-box").style.display="none"}),k)}}},{key:"subscribe",value:function(e,t){var n=window.channel+"/"+e;this.client.subscribe(n),console.log("MQTT: subscribed",n),null!=t&&t()}},{key:"publish",value:function(e,t,n){var o=new D.a.Message(t),i=window.channel+"/"+e;o.destinationName=i,this.client.send(o),console.log("MQTT: published",i),null!=n&&n()}}])&&X(t.prototype,n),o&&X(t,o),e}();function W(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var q=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,window.devicePixelRatio&&(u.dpr=window.devicePixelRatio),u.isDev,window.scene=new m.Scene,window.scene_scale=u.scale,window.selectedReality=u.selectedReality,window.renderer=new b(scene,t).threeRenderer,_=new m.Camera,scene.add(_),this.light=new M(scene),this.camera=_;["ambient","directional","point","hemi"].forEach((function(e){return n.light.place(e)}));var o=new m.Group;scene.add(o),window.markerGroup=o;var a=new p.Source({renderer:renderer,camera:_});this.mqtt=new B(scene,o),u.isDev&&u.isShowingStats&&(this.stats=new j),u.isShowingLables&&(this.labelRenderer=function(){var e=new g.b;return e.setSize(window.innerWidth,window.innerHeight),e.domElement.style.position="absolute",e.domElement.style.top="0px",e.isShowingLables=u.isShowingLables,e.isShowingObstacleLables=u.labelsVisibility.obstacles,e.isShowingRobotLables=u.labelsVisibility.robots,e.updateSize=function(){e.setSize(window.innerWidth,window.innerHeight)},document.addEventListener("DOMContentLoaded",(function(){return e.updateSize()}),!1),window.addEventListener("resize",(function(){return e.updateSize()}),!1),e}(),window.labelRenderer=this.labelRenderer,this.container.appendChild(this.labelRenderer.domElement)),u.isDev&&(this.gui=new I(this)),p.initialize({source:a}).then((function(e){n.environment=new C,u.isDev&&n.gui.load(n);var t=new p.PatternMarker({patternUrl:"./assets/data/pattern-kanji.patt",markerObject:o});e.trackMarker(t);var r=0;requestAnimationFrame((function t(n){requestAnimationFrame(t),r=r||n-1e3/60;Math.min(200,n-r);r=n,e.update(a.domElement),renderer.render(scene,_),u.isShowingLables?window.labelRenderer.domElement.hidden=!1:window.labelRenderer.domElement.hidden=!0,u.isDev&&u.isShowingStats,i.a.update()}))})),this.container.querySelector("#loading").style.display="none",window.addEventListener("click",this.onDocumentMouseDown,!1)}var t,n,o;return t=e,(n=[{key:"onDocumentMouseDown",value:function(e){e.preventDefault()}},{key:"onDocumentMouseMove",value:function(e){e.preventDefault()}}])&&W(t.prototype,n),o&&W(t,o),e}();n(248);(function(){if(h.webgl){var e=document.getElementById("appContainer");new q(e)}else h.addGetWebGLMessage()})()}},[[118,1,2]]]);